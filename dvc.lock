schema: '2.0'
stages:
  raw_dataset_creation:
    cmd: python3 src/data/load_data.py --config=params.yaml
    deps:
    - path: data/external/balanced.csv
      md5: f3e200acdb6569faa439e6686c9f390f
      size: 18788604
    - path: src/data/load_data.py
      md5: d0da8192e994972cdaa34c517afee0a3
      size: 1454
    outs:
    - path: data/raw/balanced.csv
      md5: bf8fb8261f6383897d5e425f58a0b710
      size: 18748265
      isexec: true
  split_data:
    cmd: python3 src/data/split_data.py --config=params.yaml
    deps:
    - path: data/raw/balanced.csv
      md5: bf8fb8261f6383897d5e425f58a0b710
      size: 18748265
    - path: src/data/split_data.py
      md5: b1854dab21d76130bc19af17ae456814
      size: 1403
    outs:
    - path: data/processed/backorder_test.csv
      md5: 316af557684b55218e98d5f9deb3539e
      size: 3749872
      isexec: true
    - path: data/processed/backorder_train.csv
      md5: 0b634ce86bcdad981b762d363896e249
      size: 14996086
      isexec: true
  transform_data:
    cmd: python3 src/data/transform_data.py --config=params.yaml
    deps:
    - path: data/processed/backorder_test.csv
      md5: 316af557684b55218e98d5f9deb3539e
      size: 3749872
    - path: data/processed/backorder_train.csv
      md5: 0b634ce86bcdad981b762d363896e249
      size: 14996086
    - path: src/data/transform_data.py
      md5: a88169ae2b15fa302b201f41de63e9cd
      size: 6412
    outs:
    - path: data/processed/preprocessing_pipeline.joblib
      md5: aed1b31628a957651762b79ab042b0ab
      size: 2609475
      isexec: true
    - path: data/processed/transformed_data.npy
      md5: 9e61a7a3e3fa9670114370e847b58776
      size: 2317760
      isexec: true
    - path: data/processed/transformed_target.npy
      md5: de4b3b2ed021f3148210008d505058f7
      size: 289832
      isexec: true
    - path: data/processed/transformed_test_data.npy
      md5: 9debd426c70bc324fa04286df68fd1f1
      size: 579584
      isexec: true
    - path: data/processed/transformed_test_target.npy
      md5: 720614cca18465446effdd57bcc49bbd
      size: 72560
      isexec: true
  model_train:
    cmd: python3 src/models/train_model.py --config=params.yaml
    deps:
    - path: data/processed/preprocessing_pipeline.joblib
      md5: aed1b31628a957651762b79ab042b0ab
      size: 2609475
    - path: data/processed/transformed_data.npy
      md5: 9e61a7a3e3fa9670114370e847b58776
      size: 2317760
    - path: data/processed/transformed_target.npy
      md5: de4b3b2ed021f3148210008d505058f7
      size: 289832
    - path: data/processed/transformed_test_data.npy
      md5: 9debd426c70bc324fa04286df68fd1f1
      size: 579584
    - path: data/processed/transformed_test_target.npy
      md5: 720614cca18465446effdd57bcc49bbd
      size: 72560
    - path: src/models/train_model.py
      md5: b35c94e1b56590b62b63c62b64f7888c
      size: 13607
    params:
      params.yaml:
        train_and_evaluate_config.batch_size: 10
        train_and_evaluate_config.dropout: false
        train_and_evaluate_config.epochs: 10
        train_and_evaluate_config.loss: binary_crossentropy
        train_and_evaluate_config.metrics: Recall
        train_and_evaluate_config.optimizer: adam
        train_and_evaluate_config.verbose: 1
  log_production_model:
    cmd: python3 src/models/production_model_selection.py --config=params.yaml
    deps:
    - path: src/models/production_model_selection.py
      md5: 6b7c4355b275a3de37358de3a9ff1255
      size: 2058
    params:
      params.yaml:
        train_and_evaluate_config.batch_size: 10
        train_and_evaluate_config.dropout: false
        train_and_evaluate_config.epochs: 10
        train_and_evaluate_config.loss: binary_crossentropy
        train_and_evaluate_config.metrics: Recall
        train_and_evaluate_config.optimizer: adam
        train_and_evaluate_config.verbose: 1
    outs:
    - path: prediction_service/model
      md5: e1d99c356d618f9ec027c3fda35402a2.dir
      size: 2766159
      nfiles: 11
